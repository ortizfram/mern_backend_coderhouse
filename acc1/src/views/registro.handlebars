{{! index.handlebars }}
<h1>Registro</h1>
<label for="first_name">Nombre</label>
<input type="text" id="first_name" name="first_namename" /><br /><br />
<label for="last_name">apellido:</label>
<input type="text" id="last_name" name="last_name" /><br /><br />
<label for="age">edad:</label>
<input type="text" id="age" name="age" /><br /><br />
<label for="email">Email:</label>
<input type="email" id="email" name="email" /><br /><br />
<label for="password">contrasena:</label>
<input type="password" id="password" name="password" /><br /><br />
<button onclick="submitForm()" style=" color:white;background-color:blue; padding:1rem;font-weight:800">Enviar</button>
<br><br><a href="/api/sessions/login">ya tengo una cuenta</a>

<script>
  function submitForm() { 
    const first_name = document.getElementById("first_name").value; 
    const last_name = document.getElementById("last_name").value; 
    const email = document.getElementById("email").value; 
    const password = document.getElementById("password").value; 
    const age = document.getElementById("age").value; 
    fetch("/api/sessions/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" }, 
      body: JSON.stringify({ email,password,first_name,last_name,age}),
    })
      .then((response) => { 
        if (response.ok) { 
          console.log("Usuario Creado"); 
          window.location.href = "/api/sessions/login"
        } else { 
          console.error("Error al crear usuario"); 
        } 
      }) 
      .catch((error) => console.error("Error:", error)); 
  }
</script>
